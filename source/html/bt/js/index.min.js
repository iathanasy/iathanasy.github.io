Ext.define("MJ.Demo",{statics:{randomMaxCount:20,randomMaxValue:100,rbTree:new MJ.RBTree(),avlTree:new MJ.AVLTree(),bstTree:new MJ.BST(),btTree:new MJ.BinaryTree(),binaryHeap:new MJ.BinaryHeap(),POSTORDER:"3",INORDER:"2",PREORDER:"1",LEVEL_ORDER:"0",SHOW_BH:"4",SHOW_RB:"3",SHOW_AVL:"2",SHOW_BST:"1",SHOW_BT:"0",$bhCtl:$("#bh"),$rbCtl:$("#rb"),$avlCtl:$("#avl"),$bstCtl:$("#bst"),$btCtl:$("#bt"),LINK_TYPE_ELBOW:MJ.BinaryTree.GraphLayout.LINK_TYPE_ELBOW,LINK_TYPE_LINE:MJ.BinaryTree.GraphLayout.LINK_TYPE_LINE,linkType:MJ.BinaryTree.GraphLayout.LINK_TYPE_ELBOW}});$(function(){initCommon();initBt();initBst(MJ.Demo.$bstCtl,MJ.Demo.bstTree);initBst(MJ.Demo.$avlCtl,MJ.Demo.avlTree);initBst(MJ.Demo.$rbCtl,MJ.Demo.rbTree);initRb();initBh();$("#modules").remove()});function display(){var a=showingTreeCtl();var c=a.find(".paper, .joint-paper");c.show();var b=new MJ.BinaryTree.GraphLayout({tree:showingTree(),linkType:MJ.Demo.linkType,$paper:c}).display();a.find(".node-count").text(b.tree.size);a.find(".orders select").change()}function linkType(){var a=MJ.Demo.LINK_TYPE_ELBOW;if(showingTreeCtl().find(".link-type .line").is(":checked")){a=MJ.Demo.LINK_TYPE_LINE}return a}function initCommon(){$("#common").find(".type select").change(function(){MJ.Demo.$avlCtl.hide();MJ.Demo.$bstCtl.hide();MJ.Demo.$btCtl.hide();MJ.Demo.$rbCtl.hide();MJ.Demo.$bhCtl.hide();showingTreeCtl().show();MJ.Demo.linkType=linkType()})}function initBh(){var a=MJ.Demo.$bhCtl;a.append(clonePaper());var b=a.find(".content");b.prepend("<hr>").prepend(cloneLinkType(a.attr("id"))).append("<hr>");b.append(cloneBstInput(MJ.Demo.binaryHeap));b.find(".heap-type input").click(function(){var c=MJ.Demo.binaryHeap.maxHeap;MJ.Demo.binaryHeap.maxHeap=b.find(".max-heap").is(":checked");if(c===MJ.Demo.binaryHeap.maxHeap){return}if(!MJ.Demo.binaryHeap.getRoot()){return}MJ.Demo.binaryHeap.heapify();display()})}function initBt(){var a=MJ.Demo.$btCtl;a.find(".add").click(function(){MJ.Demo.btTree.add(a.find(".node").val().trim(),a.find(".left").val().trim(),a.find(".right").val().trim());display()});a.find(".remove").click(function(){if(!MJ.Demo.btTree.getRoot()){return}MJ.Demo.btTree.remove(a.find(".node").val());display()});a.find(".clear").click(function(){if(!MJ.Demo.btTree.getRoot()){return}MJ.Demo.btTree.clear();display()});a.append(clonePaper());var b=a.find(".content");b.prepend("<hr>").prepend(cloneLinkType(a.attr("id")));b.append("<hr>").append(cloneOrders());MJ.Demo.btTree.add("Life","Animal","Person");MJ.Demo.btTree.add("Person","Man","Woman");MJ.Demo.btTree.add("Animal","Cat","Dog");MJ.Demo.btTree.add("Dog","Teddy","SingleDog");display()}function initBst(c,a){c.append(clonePaper());var b=c.find(".content");b.append(cloneLinkType(c.attr("id"))).append("<hr>");b.append(cloneBstInput(a));b.append("<hr>").append(cloneOrders())}function initRb(){MJ.Demo.$rbCtl.find(".show-null input").click(function(){MJ.Demo.rbTree.showNull=$(this).is(":checked");display()})}function showingTreeCtl(){var a=$("#common").find(".type select").val();if(a===MJ.Demo.SHOW_BT){return MJ.Demo.$btCtl}else{if(a===MJ.Demo.SHOW_BST){return MJ.Demo.$bstCtl}else{if(a===MJ.Demo.SHOW_AVL){return MJ.Demo.$avlCtl}else{if(a===MJ.Demo.SHOW_RB){return MJ.Demo.$rbCtl}else{if(a===MJ.Demo.SHOW_BH){return MJ.Demo.$bhCtl}}}}}}function showingTree(){var a=$("#common").find(".type select").val();if(a===MJ.Demo.SHOW_BT){return MJ.Demo.btTree}else{if(a===MJ.Demo.SHOW_BST){return MJ.Demo.bstTree}else{if(a===MJ.Demo.SHOW_AVL){return MJ.Demo.avlTree}else{if(a===MJ.Demo.SHOW_RB){return MJ.Demo.rbTree}else{if(a===MJ.Demo.SHOW_BH){return MJ.Demo.binaryHeap}}}}}}function cloneOrders(){var a=clone(".orders");a.find("select").change(function(){var e=$(this);var d=null;var c=e.val();var b=showingTree();if(c===MJ.Demo.LEVEL_ORDER){d=b.levelOrderElements()}else{if(c===MJ.Demo.PREORDER){d=b.preorderElements()}else{if(c===MJ.Demo.INORDER){d=b.inorderElements()}else{if(c===MJ.Demo.POSTORDER){d=b.postorderElements()}}}}e.parents(".orders").find(".show-order").text(d?d.join(", "):"")});return a}function clonePaper(){return clone(".paper").css("left","390px").css("top","15px")}function cloneLinkType(h){var g=clone(".link-type");var c=h+"-link-type";var e=function(){var i=MJ.Demo.linkType;MJ.Demo.linkType=linkType();if(MJ.Demo.linkType===i){return}if(!showingTree().getRoot()){return}display()};var b=g.find(".elbow");var d=h+"-elbow";b.parents("label").attr("for",d);b.attr("id",d);b.attr("name",c);b.click(e);var f=g.find(".line");var a=h+"-line";f.parents("label").attr("for",a);f.attr("id",a);f.attr("name",c);f.click(e);return g}function cloneBstInput(a){var b=clone(".bst-input");var c=b.find(".data");b.find(".random").click(function(){var f=b.find(".max-count").val();if(Ext.isNumeric(f)){f=parseInt(f)}else{f=MJ.Demo.randomMaxCount}var g=b.find(".max-value").val();if(Ext.isNumeric(g)){g=parseInt(g)}else{g=MJ.Demo.randomMaxValue}f=1+Math.floor(Math.random()*f);var h=[];for(var e=0;e<f;e++){var d=null;while(d===null||$.inArray(d,h)!==-1){d=1+Math.floor(Math.random()*g)}h.push(d)}c.val(h.join(", "))});b.find(".add").click(function(){var d=c.val().split(/\D+/i);for(var e in d){a.add(parseInt(d[e].trim()))}display()});b.find(".remove").click(function(){if(!a.getRoot()){return}if(a===MJ.Demo.binaryHeap){a.remove()}else{var d=c.val().split(/\D+/i);for(var e in d){a.remove(parseInt(d[e].trim()))}}display()});b.find(".clear").click(function(){if(!a.getRoot()){return}a.clear();display()});return b}function clone(a){return $("#modules").find(a).clone(true)};